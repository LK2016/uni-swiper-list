{"version":3,"sources":["webpack:///D:/wx_mini_app/wx-plugin_uni/components/drag/index.vue?42b6","webpack:///D:/wx_mini_app/wx-plugin_uni/components/drag/index.vue?4331","webpack:///D:/wx_mini_app/wx-plugin_uni/components/drag/index.vue?295d","webpack:///D:/wx_mini_app/wx-plugin_uni/components/drag/index.vue?193a","webpack:///D:/wx_mini_app/wx-plugin_uni/components/drag/index.vue","webpack:///D:/wx_mini_app/wx-plugin_uni/components/drag/index.vue?098d","webpack:///D:/wx_mini_app/wx-plugin_uni/components/drag/index.vue?fd51"],"names":["IsOutRange","x1","y1","x2","y2","x3","y3","compareVersion","v1","v2","split","len","Math","max","length","push","i","num1","parseInt","num2","data","pageMetaSupport","windowHeight","platform","realTopSize","realBottomSize","rows","itemDom","width","height","left","top","itemWrapDom","startId","preStartKey","list","cur","curZ","tranX","tranY","itemWrapHeight","dragging","itemTransition","components","props","beforeExtraNodes","type","Array","default","afterExtraNodes","listData","columns","Number","topSize","bottomSize","scrollTop","options","multipleSlots","mounted","init","methods","longPress","e","startTouch","changedTouches","index","currentTarget","dataset","isFixed","setData","startPageX","pageX","startPageY","pageY","identifier","wx","vibrateShort","touchMove","currentTouch","currentPageX","currentPageY","currentId","currentClientY","clientY","$emit","pageScrollTo","duration","startKey","key","curX","round","curY","endKey","sort","touchEnd","triggerCustomEvent","clearData","map","item","fixed","sortKey","excludeFix","updateList","_sortKey","vibrate","floor","setTimeout","itemClick","currentItem","extraNode","_list","forEach","currentKey","initDom","getSystemInfoSync","windowWidth","SDKVersion","remScale","createSelectorQuery","select","boundingClientRect","res","ceil","exec","_listData","delItem","id","dragId","slot","_item","destKey","_index"],"mappings":"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","file":"components/drag/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=3f17930a&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3f17930a')) {\n      api.createRecord('3f17930a', component.options)\n    } else {\n      api.reload('3f17930a', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=3f17930a&\", function () {\n      api.rerender('3f17930a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"wx_mini_app/wx-plugin_uni/components/drag/index.vue\"\nexport default component.exports","export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=3f17930a&\"","var render = function () {}\nvar staticRenderFns = []\nvar recyclableRender\nvar components\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\n/**\r\n * 判断是否超出范围\r\n */\r\nconst IsOutRange = (x1, y1, x2, y2, x3, y3) => {\r\n  return x1 < 0 || x1 >= y1 || x2 < 0 || x2 >= y2 || x3 < 0 || x3 >= y3;\r\n};\r\n/**\r\n * 版本号比较\r\n */\r\n/**\r\n * 版本号比较\r\n */\r\nconst compareVersion = (v1, v2) => {\r\n  v1 = v1.split('.');\r\n  v2 = v2.split('.');\r\n  const len = Math.max(v1.length, v2.length);\r\n\r\n  while (v1.length < len) {\r\n    v1.push('0');\r\n  }\r\n\r\n  while (v2.length < len) {\r\n    v2.push('0');\r\n  }\r\n\r\n  for (let i = 0; i < len; i++) {\r\n    const num1 = parseInt(v1[i]);\r\n    const num2 = parseInt(v2[i]);\r\n\r\n    if (num1 > num2) {\r\n      return 1;\r\n    } else if (num1 < num2) {\r\n      return -1;\r\n    }\r\n  }\r\n\r\n  return 0;\r\n};\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      /* 未渲染数据 */\r\n      pageMetaSupport: false,\r\n      // 当前版本是否支持 page-meta 标签\r\n      windowHeight: 0,\r\n      // 视窗高度\r\n      platform: '',\r\n      // 平台信息\r\n      realTopSize: 0,\r\n      // 计算后顶部固定高度实际值\r\n      realBottomSize: 0,\r\n      // 计算后底部固定高度实际值\r\n      rows: 0,\r\n      // 行数\r\n      itemDom: {\r\n        width: 0,\r\n        height: 0,\r\n        left: 0,\r\n        top: 0\r\n      },\r\n      // 每一项 item 的 dom 信息, 由于大小一样所以只存储一个\r\n      itemWrapDom: {\r\n        width: 0,\r\n        height: 0,\r\n        left: 0,\r\n        top: 0\r\n      },\r\n      // 整个拖拽区域的 dom 信息\r\n      startId: 0,\r\n      // 初始触摸点 identifier\r\n      preStartKey: -1,\r\n      // 前一次排序时候的起始 sortKey 值\r\n\r\n      /* 渲染数据 */\r\n      list: [],\r\n      // 渲染数据列\r\n      cur: -1,\r\n      // 当前激活的元素\r\n      curZ: -1,\r\n      // 当前激活的元素, 用于控制激活元素z轴显示\r\n      tranX: 0,\r\n      // 当前激活元素的 X轴 偏移量\r\n      tranY: 0,\r\n      // 当前激活元素的 Y轴 偏移量\r\n      itemWrapHeight: 0,\r\n      // 动态计算父级元素高度\r\n      dragging: false,\r\n      // 是否在拖拽中\r\n      itemTransition: false // item 变换是否需要过渡动画, 首次渲染不需要\r\n\r\n    };\r\n  },\r\n\r\n  components: {},\r\n  props: {\r\n    beforeExtraNodes: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 插入正常节点之前的额外节点\r\n    afterExtraNodes: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 插入正常节点之后的额外节点\r\n    listData: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 数据源\r\n    columns: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    // 列数\r\n    topSize: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    // 顶部高度\r\n    bottomSize: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    // 底部高度\r\n    scrollTop: {\r\n      type: Number,\r\n      default: 0\r\n    } // 页面滚动高度\r\n\r\n  },\r\n  options: {\r\n    multipleSlots: true\r\n  },\r\n\r\n  mounted() {\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * 长按触发移动排序\r\n     */\r\n    longPress(e) {\r\n      // 获取触摸点信息\r\n      let startTouch = e.changedTouches[0];\r\n      if (!startTouch) return; // 固定项则返回\r\n\r\n      let index = e.currentTarget.dataset.index;\r\n      if (this.isFixed(index)) return; // 防止多指触发 drag 动作, 如果已经在 drag 中则返回, touchstart 事件中有效果\r\n\r\n      if (this.dragging) return;\r\n      this.setData({\r\n        dragging: true\r\n      });\r\n      let {\r\n        platform,\r\n        itemDom,\r\n        itemWrapDom\r\n      } = this,\r\n          {\r\n        pageX: startPageX,\r\n        pageY: startPageY,\r\n        identifier: startId\r\n      } = startTouch; // 计算X,Y轴初始位移, 使 item 中心移动到点击处\r\n\r\n      let tranX = startPageX - itemDom.width / 2 - itemWrapDom.left,\r\n          tranY = startPageY - itemDom.height / 2 - itemWrapDom.top; // 单列时候X轴初始不做位移\r\n\r\n      if (this.columns === 1) tranX = 0;\r\n      this.startId = startId;\r\n      this.setData({\r\n        cur: index,\r\n        curZ: index,\r\n        tranX,\r\n        tranY\r\n      });\r\n      if (platform !== \"devtools\") wx.vibrateShort();\r\n    },\r\n\r\n    touchMove(e) {\r\n      // 获取触摸点信息\r\n      let currentTouch = e.changedTouches[0];\r\n      if (!currentTouch) return;\r\n      if (!this.dragging) return;\r\n      let {\r\n        pageMetaSupport,\r\n        windowHeight,\r\n        realTopSize,\r\n        realBottomSize,\r\n        itemDom,\r\n        itemWrapDom,\r\n        preStartKey,\r\n        columns,\r\n        rows\r\n      } = this,\r\n          {\r\n        pageX: currentPageX,\r\n        pageY: currentPageY,\r\n        identifier: currentId,\r\n        clientY: currentClientY\r\n      } = currentTouch; // 如果不是同一个触发点则返回\r\n\r\n      if (this.startId !== currentId) return; // 通过 当前坐标点, 初始坐标点, 初始偏移量 来计算当前偏移量\r\n\r\n      let tranX = currentPageX - itemDom.width / 2 - itemWrapDom.left,\r\n          tranY = currentPageY - itemDom.height / 2 - itemWrapDom.top; // 单列时候X轴初始不做位移\r\n\r\n      if (columns === 1) tranX = 0; // 到顶到底自动滑动\r\n\r\n      if (currentClientY > windowHeight - itemDom.height - realBottomSize) {\r\n        // 当前触摸点pageY + item高度 - (屏幕高度 - 底部固定区域高度)\r\n        if (pageMetaSupport) {\r\n          this.$emit(\"scroll\", {\r\n            scrollTop: currentPageY + itemDom.height - (windowHeight - realBottomSize)\r\n          });\r\n        } else {\r\n          wx.pageScrollTo({\r\n            scrollTop: currentPageY + itemDom.height - (windowHeight - realBottomSize),\r\n            duration: 300\r\n          });\r\n        }\r\n      } else if (currentClientY < itemDom.height + realTopSize) {\r\n        // 当前触摸点pageY - item高度 - 顶部固定区域高度\r\n        if (pageMetaSupport) {\r\n          this.$emit(\"scroll\", {\r\n            scrollTop: currentPageY - itemDom.height - realTopSize\r\n          });\r\n        } else {\r\n          wx.pageScrollTo({\r\n            scrollTop: currentPageY - itemDom.height - realTopSize,\r\n            duration: 300\r\n          });\r\n        }\r\n      } // 设置当前激活元素偏移量\r\n\r\n\r\n      this.setData({\r\n        tranX: tranX,\r\n        tranY: tranY\r\n      }); // 获取 startKey 和 endKey\r\n\r\n      let startKey = parseInt(e.currentTarget.dataset.key);\r\n      let curX = Math.round(tranX / itemDom.width),\r\n          curY = Math.round(tranY / itemDom.height);\r\n      let endKey = curX + columns * curY; // 遇到固定项和超出范围则返回\r\n\r\n      if (this.isFixed(endKey) || IsOutRange(curX, columns, curY, rows, endKey, this.list.length)) return; // 防止拖拽过程中发生乱序问题\r\n\r\n      if (startKey === endKey || startKey === preStartKey) return;\r\n      this.preStartKey = startKey; // 触发排序\r\n\r\n      this.sort(startKey, endKey);\r\n    },\r\n\r\n    touchEnd() {\r\n      if (!this.dragging) return;\r\n      this.triggerCustomEvent(this.list, \"sortend\");\r\n      this.clearData();\r\n    },\r\n\r\n    /**\r\n     * 根据 startKey 和 endKey 去重新计算每一项 sortKey\r\n     */\r\n    sort(startKey, endKey) {\r\n      this.setData({\r\n        itemTransition: true\r\n      });\r\n      let list = this.list.map(item => {\r\n        if (item.fixed) return item;\r\n\r\n        if (startKey < endKey) {\r\n          // 正序拖动\r\n          if (item.sortKey > startKey && item.sortKey <= endKey) {\r\n            item.sortKey = this.excludeFix(item.sortKey - 1, startKey, 'reduce');\r\n          } else if (item.sortKey === startKey) {\r\n            item.sortKey = endKey;\r\n          }\r\n\r\n          return item;\r\n        } else if (startKey > endKey) {\r\n          // 倒序拖动\r\n          if (item.sortKey >= endKey && item.sortKey < startKey) {\r\n            item.sortKey = this.excludeFix(item.sortKey + 1, startKey, 'add');\r\n          } else if (item.sortKey === startKey) {\r\n            item.sortKey = endKey;\r\n          }\r\n\r\n          return item;\r\n        }\r\n      });\r\n      this.updateList(list);\r\n    },\r\n\r\n    /**\r\n     * 排除固定项得到最终 sortKey\r\n     */\r\n    excludeFix(sortKey, startKey, type) {\r\n      if (sortKey === startKey) return startKey;\r\n\r\n      if (this.list[sortKey].fixed) {\r\n        let _sortKey = type === 'reduce' ? sortKey - 1 : sortKey + 1;\r\n\r\n        return this.excludeFix(_sortKey, startKey, type);\r\n      } else {\r\n        return sortKey;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 根据排序后 list 数据进行位移计算\r\n     */\r\n    updateList(data, vibrate = true) {\r\n      let {\r\n        platform\r\n      } = this;\r\n      let list = data.map((item, index) => {\r\n        item.tranX = `${item.sortKey % this.columns * 100}%`;\r\n        item.tranY = `${Math.floor(item.sortKey / this.columns) * 100}%`;\r\n        return item;\r\n      });\r\n      this.setData({\r\n        list: list\r\n      });\r\n      if (!vibrate) return;\r\n      if (platform !== \"devtools\") wx.vibrateShort();\r\n      this.triggerCustomEvent(list, \"change\");\r\n    },\r\n\r\n    /**\r\n     * 判断是否是固定的 item\r\n     */\r\n    isFixed(index) {\r\n      let list = this.list;\r\n      if (list && list[index] && list[index].fixed) return 1;\r\n      return 0;\r\n    },\r\n\r\n    /**\r\n     * 清除参数\r\n     */\r\n    clearData() {\r\n      this.setData({\r\n        preStartKey: -1,\r\n        dragging: false,\r\n        cur: -1,\r\n        tranX: 0,\r\n        tranY: 0\r\n      }); // 延迟清空\r\n\r\n      setTimeout(() => {\r\n        this.setData({\r\n          curZ: -1\r\n        });\r\n      }, 300);\r\n    },\r\n\r\n    /**\r\n     * 点击每一项后触发事件\r\n     */\r\n    itemClick(e) {\r\n      let {\r\n        index,\r\n        key\r\n      } = e.currentTarget.dataset;\r\n      let list = this.list;\r\n      let currentItem = list[index];\r\n\r\n      if (!currentItem.extraNode) {\r\n        let _list = [];\r\n        list.forEach(item => {\r\n          _list[item.sortKey] = item;\r\n        });\r\n        let currentKey = -1;\r\n\r\n        for (let i = 0, len = _list.length; i < len; i++) {\r\n          let item = _list[i];\r\n\r\n          if (!item.extraNode) {\r\n            currentKey++;\r\n          }\r\n\r\n          if (item.sortKey === currentItem.sortKey) {\r\n            break;\r\n          }\r\n        }\r\n\r\n        this.$emit('click', {\r\n          key: currentKey,\r\n          data: currentItem.data\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 封装自定义事件\r\n     * @param list 当前渲染的数据\r\n     * @param type 事件类型\r\n     */\r\n    triggerCustomEvent(list, type) {\r\n      let _list = [],\r\n          listData = [];\r\n      list.forEach(item => {\r\n        _list[item.sortKey] = item;\r\n      });\r\n\r\n      _list.forEach(item => {\r\n        if (!item.extraNode) {\r\n          listData.push(item.data);\r\n        }\r\n      });\r\n\r\n      this.$emit(type, {\r\n        listData: listData\r\n      });\r\n    },\r\n\r\n    /**\r\n     *  初始化获取 dom 信息\r\n     */\r\n    initDom() {\r\n      let {\r\n        windowWidth,\r\n        windowHeight,\r\n        platform,\r\n        SDKVersion\r\n      } = wx.getSystemInfoSync();\r\n      this.pageMetaSupport = compareVersion(SDKVersion, '2.9.0') >= 0;\r\n      let remScale = (windowWidth || 375) / 375,\r\n          realTopSize = this.topSize * remScale / 2,\r\n          realBottomSize = this.bottomSize * remScale / 2;\r\n      this.windowHeight = windowHeight;\r\n      this.platform = platform;\r\n      this.realTopSize = realTopSize;\r\n      this.realBottomSize = realBottomSize;\r\n      this.createSelectorQuery().select(\".item\").boundingClientRect(res => {\r\n        let rows = Math.ceil(this.list.length / this.columns);\r\n        this.rows = rows;\r\n        this.itemDom = res;\r\n        this.setData({\r\n          itemWrapHeight: rows * res.height\r\n        });\r\n        this.createSelectorQuery().select(\".item-wrap\").boundingClientRect(res => {\r\n          this.itemWrapDom = res;\r\n          this.itemWrapDom.top += this.scrollTop;\r\n        }).exec();\r\n      }).exec();\r\n    },\r\n\r\n    /**\r\n     *  初始化函数\r\n     *  {listData, columns, topSize, bottomSize} 参数改变需要重新调用初始化方法\r\n     */\r\n    init() {\r\n      this.clearData();\r\n      this.setData({\r\n        itemTransition: false\r\n      }); // 避免获取不到节点信息报错问题\r\n\r\n      if (this.listData.length === 0) {\r\n        this.setData({\r\n          list: [],\r\n          itemWrapHeight: 0\r\n        });\r\n        return;\r\n      }\r\n\r\n      let {\r\n        listData,\r\n        beforeExtraNodes,\r\n        afterExtraNodes\r\n      } = this;\r\n      let _listData = [];\r\n\r\n      let delItem = (item, extraNode) => ({\r\n        id: item.dragId,\r\n        slot: item.slot,\r\n        fixed: item.fixed,\r\n        extraNode: extraNode,\r\n        tranX: \"0%\",\r\n        tranY: \"0%\",\r\n        data: item\r\n      }); // 遍历数据源增加扩展项, 以用作排序使用\r\n\r\n\r\n      listData.forEach((item, index) => {\r\n        beforeExtraNodes.forEach(_item => {\r\n          if (_item.destKey === index) _listData.push(delItem(_item, true));\r\n        });\r\n\r\n        _listData.push(delItem(item, false));\r\n\r\n        afterExtraNodes.forEach((_item, _index) => {\r\n          if (_item.destKey === index) _listData.push(delItem(_item, true));\r\n        });\r\n      });\r\n\r\n      let list = _listData.map((item, index) => {\r\n        return {\r\n          sortKey: index,\r\n          // 初始化 sortKey 为当前项索引值\r\n          ...item\r\n        };\r\n      });\r\n\r\n      this.updateList(list, false); // 异步加载数据时候, 延迟执行 initDom 方法, 防止基础库 2.7.1 版本及以下无法正确获取 dom 信息\r\n\r\n      setTimeout(() => this.initDom(), 0);\r\n    }\r\n\r\n  }\r\n};\r\n","import mod from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}