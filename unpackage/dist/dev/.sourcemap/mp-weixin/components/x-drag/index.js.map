{"version":3,"sources":["webpack:///D:/wx_mini_app/wx-plugin_uni/components/x-drag/index.vue?2c9f","webpack:///D:/wx_mini_app/wx-plugin_uni/components/x-drag/index.vue?0798","webpack:///D:/wx_mini_app/wx-plugin_uni/components/x-drag/index.vue?099e","webpack:///D:/wx_mini_app/wx-plugin_uni/components/x-drag/index.vue?bf08","webpack:///D:/wx_mini_app/wx-plugin_uni/components/x-drag/index.vue","webpack:///D:/wx_mini_app/wx-plugin_uni/components/x-drag/index.vue?1978","webpack:///D:/wx_mini_app/wx-plugin_uni/components/x-drag/index.vue?b0f2"],"names":["time","gap","data","windowWidth","platform","maxScroll","itemDom","width","height","left","top","itemWrapDom","startTouch","pageX","pageY","identifier","preStartKey","list","cur","curZ","tranX","tranY","wrapStyle","dragging","itemTransition","scrollTransition","scrollLeft","currentItem","animationData","components","props","beforeExtraNodes","type","Array","default","afterExtraNodes","listData","dragDownDistance","Number","needDragDown","Boolean","needSort","needScroll","options","multipleSlots","mounted","init","methods","scrollStart","e","setData","changedTouches","startClientX","clientX","scrollMove","currentTouch","_scrollLeft","scrollEnd","scroll","detail","getKeyByClientX","Math","round","longPress","startKey","find","item","sortKey","index","findIndex","console","log","isFixed","startPageX","startPageY","startId","clearTimeout","timer","setTimeout","touchMove","wx","vibrateShort","currentPageX","currentPageY","currentId","currentClientX","currentClientY","clientY","endKey","curY","clearAnimation","translateX","length","sort","touchEnd","triggerCustomEvent","clearData","map","fixed","excludeFix","updateList","_sortKey","vibrate","itemClick","currentTarget","dataset","key","extraNode","_list","forEach","currentKey","i","len","$emit","push","initDom","isMaxScroll","getSystemInfoSync","remScale","createSelectorQuery","select","boundingClientRect","res","exec","needTranFirst","_listData","delItem","id","dragId","slot","_item","destKey","_index"],"mappings":"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","file":"components/x-drag/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=3ca46d20&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\soft\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3ca46d20')) {\n      api.createRecord('3ca46d20', component.options)\n    } else {\n      api.reload('3ca46d20', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=3ca46d20&\", function () {\n      api.rerender('3ca46d20', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"wx_mini_app/wx-plugin_uni/components/x-drag/index.vue\"\nexport default component.exports","export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=3ca46d20&\"","var render = function () {}\nvar staticRenderFns = []\nvar recyclableRender\nvar components\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nlet time = 100,\r\n    gap = 100;\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      /* 未渲染数据 */\r\n      windowWidth: 0,\r\n      // 视窗宽度\r\n      platform: '',\r\n      // 平台信息\r\n      maxScroll: 0,\r\n      // 最大滚动距离\r\n      itemDom: {\r\n        width: 0,\r\n        height: 0,\r\n        left: 0,\r\n        top: 0\r\n      },\r\n      // 每一项 item 的 dom 信息, 由于大小一样所以只存储一个\r\n      itemWrapDom: {\r\n        width: 0,\r\n        height: 0,\r\n        left: 0,\r\n        top: 0\r\n      },\r\n      // 整个拖拽区域的 dom 信息\r\n      startTouch: {\r\n        pageX: 0,\r\n        pageY: 0,\r\n        identifier: 0\r\n      },\r\n      // 初始触摸点 identifier\r\n      preStartKey: -1,\r\n      // 前一次排序时候的起始 sortKey 值\r\n\r\n      /* 渲染数据 */\r\n      list: [],\r\n      // 渲染数据列\r\n      cur: -1,\r\n      // 当前激活的元素\r\n      curZ: -1,\r\n      // 当前激活的元素, 用于控制激活元素z轴显示\r\n      tranX: 0,\r\n      // 当前激活元素的 X轴 偏移量\r\n      tranY: 0,\r\n      // 当前激活元素的 Y轴 偏移量\r\n      wrapStyle: \"\",\r\n      // 父级 item 元素样式\r\n      dragging: false,\r\n      // 是否在拖拽中\r\n      itemTransition: false,\r\n      // item 变换是否需要过渡动画, 首次渲染不需要\r\n      scrollTransition: false,\r\n      // 最外层 scroll 是否需要过渡动画\r\n      scrollLeft: 0,\r\n      // 最外层 scroll 元素左边滚动距离\r\n      currentItem: {},\r\n      // 最外层 scroll 元素左边滚动距离\r\n      animationData: {} // 最外层 scroll 元素左边滚动距离\r\n\r\n    };\r\n  },\r\n\r\n  components: {},\r\n  props: {\r\n    beforeExtraNodes: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 插入正常节点之前的额外节点\r\n    afterExtraNodes: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 插入正常节点之后的额外节点\r\n    listData: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    // 数据源\r\n    dragDownDistance: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    // 下拉触发事件距离\r\n    needDragDown: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    // 是否需要下拉事件\r\n    needSort: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    // 是否需要排序\r\n    needScroll: {\r\n      type: Boolean,\r\n      default: true\r\n    } // 是否需要排序\r\n\r\n  },\r\n  options: {\r\n    multipleSlots: true\r\n  },\r\n\r\n  mounted() {\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    scrollStart(e) {\r\n      this.setData({\r\n        scrollTransition: false\r\n      });\r\n      let startTouch = e.changedTouches[0];\r\n      this.startClientX = startTouch.clientX;\r\n      this.scrollLeft = this.scrollLeft;\r\n    },\r\n\r\n    scrollMove(e) {\r\n      if (this.scrollTransition) return;\r\n      let {\r\n        maxScroll\r\n      } = this;\r\n      let currentTouch = e.changedTouches[0];\r\n\r\n      let _scrollLeft = this.startClientX - currentTouch.clientX + this.scrollLeft;\r\n\r\n      _scrollLeft = _scrollLeft >= maxScroll ? maxScroll : _scrollLeft;\r\n      _scrollLeft = _scrollLeft <= 0 ? 0 : _scrollLeft;\r\n      this.setData({\r\n        scrollLeft: _scrollLeft\r\n      });\r\n    },\r\n\r\n    scrollEnd(e) {},\r\n\r\n    scroll(e) {\r\n      this.scrollLeft = e.detail.scrollLeft;\r\n    },\r\n\r\n    getKeyByClientX(clientX) {\r\n      let {\r\n        scrollLeft,\r\n        itemDom\r\n      } = this;\r\n      let tranX = clientX - itemDom.width / 2 + scrollLeft;\r\n      return Math.round(tranX / itemDom.width);\r\n    },\r\n\r\n    /**\r\n     * 长按触发移动排序\r\n     */\r\n    longPress(e) {\r\n      this.setData({\r\n        scrollTransition: true\r\n      }); // 获取触摸点信息\r\n\r\n      let startTouch = e.changedTouches[0];\r\n      if (!startTouch) return;\r\n      this.startKey = this.getKeyByClientX(startTouch.clientX);\r\n      const currentItem = this.list.find(item => item.sortKey === this.startKey);\r\n      const index = this.list.findIndex(item => item.sortKey === this.startKey);\r\n      this.setData({\r\n        currentItem\r\n      });\r\n      console.log(currentItem); // 固定项则返回\r\n\r\n      if (this.isFixed(index)) return; // 防止多指触发 drag 动作, 如果已经在 drag 中则返回, touchstart 事件中有效果\r\n\r\n      if (this.dragging) return;\r\n      this.setData({\r\n        dragging: true\r\n      });\r\n      let {\r\n        platform,\r\n        maxScroll,\r\n        scrollLeft,\r\n        itemDom,\r\n        itemWrapDom,\r\n        windowWidth\r\n      } = this,\r\n          {\r\n        pageX: startPageX,\r\n        pageY: startPageY,\r\n        identifier: startId\r\n      } = startTouch; // 计算X,Y轴初始位移, 使 item 中心移动到点击处\r\n\r\n      let tranX = startPageX - itemDom.width / 2,\r\n          tranY = startPageY - itemDom.height / 2 - itemWrapDom.top;\r\n      this.startTouch = startTouch;\r\n      this.setData({\r\n        cur: index,\r\n        tranX,\r\n        tranY\r\n      });\r\n\r\n      if (this.needScroll) {\r\n        clearTimeout(this.timer); // 到侧边底自动滑动\r\n\r\n        if (startPageX + itemDom.width / 2 >= windowWidth - gap) {\r\n          this.timer = setTimeout(() => {\r\n            let _scrollLeft = scrollLeft + gap;\r\n\r\n            _scrollLeft = _scrollLeft >= maxScroll ? maxScroll : _scrollLeft;\r\n            _scrollLeft = _scrollLeft <= 0 ? 0 : _scrollLeft;\r\n            this.setData({\r\n              scrollLeft: _scrollLeft\r\n            });\r\n            this.touchMove(e);\r\n          }, time);\r\n        } else if (startPageX - itemDom.width / 2 <= gap) {\r\n          this.timer = setTimeout(() => {\r\n            let _scrollLeft = scrollLeft - gap;\r\n\r\n            _scrollLeft = _scrollLeft >= maxScroll ? maxScroll : _scrollLeft;\r\n            _scrollLeft = _scrollLeft <= 0 ? 0 : _scrollLeft;\r\n            this.setData({\r\n              scrollLeft: _scrollLeft\r\n            });\r\n            this.touchMove(e);\r\n          }, time);\r\n        }\r\n      }\r\n\r\n      if (platform !== \"devtools\") wx.vibrateShort();\r\n    },\r\n\r\n    touchMove(e) {\r\n      // 获取触摸点信息\r\n      let currentTouch = e.changedTouches[0];\r\n      if (!currentTouch) return;\r\n      if (!this.dragging) return;\r\n      let {\r\n        windowWidth,\r\n        maxScroll,\r\n        scrollLeft,\r\n        itemDom,\r\n        itemWrapDom,\r\n        preStartKey,\r\n        startTouch,\r\n        needDragDown,\r\n        needSort,\r\n        needScroll\r\n      } = this,\r\n          {\r\n        pageX: currentPageX,\r\n        pageY: currentPageY,\r\n        identifier: currentId,\r\n        clientX: currentClientX,\r\n        clientY: currentClientY\r\n      } = currentTouch; // 如果不是同一个触发点则返回\r\n\r\n      if (startTouch.identifier !== currentId) return; // 通过 当前坐标点, 初始坐标点, 初始偏移量 来计算当前偏移量\r\n\r\n      let tranX = currentClientX - itemDom.width / 2,\r\n          tranY = currentClientY - itemDom.height / 2 - itemWrapDom.top; // 设置当前激活元素偏移量\r\n\r\n      this.setData({\r\n        tranX: tranX,\r\n        tranY: tranY\r\n      }); // 获取 startKey 和 endKey\r\n\r\n      let startKey = this.startKey;\r\n      let endKey = this.getKeyByClientX(currentClientX),\r\n          curY = Math.round(tranY / itemDom.height); // if (needDragDown && tranY > this.data.dragDownDistance) {\r\n      // \tlet index = e.currentTarget.dataset.index;\r\n      //\r\n      // \tlet list = this.data.list;\r\n      //\r\n      // \tlet item = list[index];\r\n      //\r\n      // \tif (item.data.marked) return;\r\n      //\r\n      // \titem.data.marked = true\r\n      //\r\n      // \tthis.setData({\r\n      // \t\tlist\r\n      // \t})\r\n      //\r\n      // \tthis.setData({\r\n      // \t\titemTransition: false\r\n      // \t})\r\n      // \tthis.touchEnd();\r\n      // \tthis.triggerEvent(\"dragdown\", {clientX: currentClientX, item: item.data});\r\n      // \treturn;\r\n      // }\r\n\r\n      let _scrollLeft = scrollLeft;\r\n\r\n      if (needScroll) {\r\n        clearTimeout(this.timer);\r\n        this.clearAnimation('#scroll', {\r\n          translateX: true\r\n        }); // 到侧边底自动滑动\r\n\r\n        if (currentClientX + itemDom.width / 2 >= windowWidth - gap) {\r\n          _scrollLeft = scrollLeft + gap;\r\n          _scrollLeft = _scrollLeft >= maxScroll ? maxScroll : _scrollLeft;\r\n          _scrollLeft = _scrollLeft <= 0 ? 0 : _scrollLeft;\r\n          this.setData({\r\n            scrollLeft: _scrollLeft\r\n          });\r\n        } else if (currentClientX - itemDom.width / 2 <= gap) {\r\n          _scrollLeft = scrollLeft - gap;\r\n          _scrollLeft = _scrollLeft >= maxScroll ? maxScroll : _scrollLeft;\r\n          _scrollLeft = _scrollLeft <= 0 ? 0 : _scrollLeft;\r\n          this.setData({\r\n            scrollLeft: _scrollLeft\r\n          });\r\n        }\r\n      } // 遇到固定项和超出范围则返回,以及是否需要排序\r\n\r\n\r\n      if (this.isFixed(endKey) || curY !== 0 || endKey < 0 || endKey >= this.list.length || !needSort) return; // 防止拖拽过程中发生乱序问题\r\n\r\n      if (startKey === endKey || startKey === preStartKey) return;\r\n      this.preStartKey = startKey; // 触发排序\r\n\r\n      this.sort(startKey, endKey);\r\n      this.startKey = endKey;\r\n    },\r\n\r\n    touchEnd() {\r\n      if (!this.dragging) return;\r\n      this.triggerCustomEvent(this.list, \"sortend\");\r\n      this.clearData();\r\n    },\r\n\r\n    /**\r\n     * 根据 startKey 和 endKey 去重新计算每一项 sortKey\r\n     */\r\n    sort(startKey, endKey) {\r\n      this.setData({\r\n        itemTransition: true\r\n      });\r\n      let list = this.list.map(item => {\r\n        if (item.fixed) return item;\r\n\r\n        if (startKey < endKey) {\r\n          // 正序拖动\r\n          if (item.sortKey > startKey && item.sortKey <= endKey) {\r\n            item.sortKey = this.excludeFix(item.sortKey - 1, startKey, 'reduce');\r\n          } else if (item.sortKey === startKey) {\r\n            item.sortKey = endKey;\r\n          }\r\n\r\n          return item;\r\n        } else if (startKey > endKey) {\r\n          // 倒序拖动\r\n          if (item.sortKey >= endKey && item.sortKey < startKey) {\r\n            item.sortKey = this.excludeFix(item.sortKey + 1, startKey, 'add');\r\n          } else if (item.sortKey === startKey) {\r\n            item.sortKey = endKey;\r\n          }\r\n\r\n          return item;\r\n        }\r\n      });\r\n      this.updateList(list);\r\n    },\r\n\r\n    /**\r\n     * 排除固定项得到最终 sortKey\r\n     */\r\n    excludeFix(sortKey, startKey, type) {\r\n      if (sortKey === startKey) return startKey;\r\n\r\n      if (this.list[sortKey].fixed) {\r\n        let _sortKey = type === 'reduce' ? sortKey - 1 : sortKey + 1;\r\n\r\n        return this.excludeFix(_sortKey, startKey, type);\r\n      } else {\r\n        return sortKey;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 根据排序后 list 数据进行位移计算\r\n     */\r\n    updateList(data, vibrate = true) {\r\n      let {\r\n        platform\r\n      } = this;\r\n      let list = data.map((item, index) => {\r\n        item.tranX = `${item.sortKey * 100}%`;\r\n        item.tranY = 0;\r\n        return item;\r\n      });\r\n      this.setData({\r\n        list: list\r\n      });\r\n      if (!vibrate) return;\r\n      if (platform !== \"devtools\") wx.vibrateShort();\r\n      this.triggerCustomEvent(list, \"change\");\r\n    },\r\n\r\n    /**\r\n     * 判断是否是固定的 item\r\n     */\r\n    isFixed(index) {\r\n      let list = this.list;\r\n      if (list && list[index] && list[index].fixed) return 1;\r\n      return 0;\r\n    },\r\n\r\n    /**\r\n     * 清除参数\r\n     */\r\n    clearData() {\r\n      this.setData({\r\n        preStartKey: -1,\r\n        dragging: false,\r\n        cur: -1,\r\n        tranX: 0,\r\n        tranY: 0\r\n      }); // 延迟清空\r\n\r\n      setTimeout(() => {\r\n        this.setData({\r\n          curZ: -1\r\n        });\r\n      }, 300);\r\n    },\r\n\r\n    /**\r\n     * 点击每一项后触发事件\r\n     */\r\n    itemClick(e) {\r\n      let {\r\n        index,\r\n        key\r\n      } = e.currentTarget.dataset;\r\n      let list = this.list;\r\n      let currentItem = list[index];\r\n\r\n      if (!currentItem.extraNode) {\r\n        let _list = [];\r\n        list.forEach(item => {\r\n          _list[item.sortKey] = item;\r\n        });\r\n        let currentKey = -1;\r\n\r\n        for (let i = 0, len = _list.length; i < len; i++) {\r\n          let item = _list[i];\r\n\r\n          if (!item.extraNode) {\r\n            currentKey++;\r\n          }\r\n\r\n          if (item.sortKey === currentItem.sortKey) {\r\n            break;\r\n          }\r\n        }\r\n\r\n        this.$emit('click', {\r\n          key: currentKey,\r\n          data: currentItem.data\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 封装自定义事件\r\n     * @param list 当前渲染的数据\r\n     * @param type 事件类型\r\n     */\r\n    triggerCustomEvent(list, type) {\r\n      let _list = [],\r\n          listData = [];\r\n      list.forEach(item => {\r\n        _list[item.sortKey] = item;\r\n      });\r\n\r\n      _list.forEach(item => {\r\n        if (!item.extraNode) {\r\n          listData.push(item.data);\r\n        }\r\n      });\r\n\r\n      this.$emit(type, {\r\n        listData: listData\r\n      });\r\n    },\r\n\r\n    /**\r\n     *  初始化获取 dom 信息\r\n     */\r\n    initDom(isMaxScroll) {\r\n      let {\r\n        windowWidth,\r\n        platform\r\n      } = wx.getSystemInfoSync();\r\n      let remScale = (windowWidth || 375) / 375;\r\n      this.windowWidth = windowWidth;\r\n      this.platform = platform;\r\n      this.createSelectorQuery().select(\".item\").boundingClientRect(res => {\r\n        this.itemDom = res;\r\n        let wrapStyle = `width: ${this.list.length * res.width}px;height: ${res.height}px;`;\r\n        this.setData({\r\n          wrapStyle: wrapStyle\r\n        });\r\n        this.createSelectorQuery().select(\"#item-wrap\").boundingClientRect(res => {\r\n          let maxScroll = res.width - windowWidth;\r\n          maxScroll = maxScroll < 0 ? 0 : maxScroll;\r\n          this.maxScroll = maxScroll;\r\n          this.itemWrapDom = res;\r\n        }).exec();\r\n      }).exec();\r\n    },\r\n\r\n    /**\r\n     *  初始化函数\r\n     *  {listData, columns, topSize, bottomSize} 参数改变需要重新调用初始化方法\r\n     */\r\n    init(needTranFirst = false) {\r\n      this.clearData();\r\n      this.setData({\r\n        itemTransition: needTranFirst\r\n      }); // 避免获取不到节点信息报错问题\r\n\r\n      if (this.listData.length === 0) {\r\n        this.setData({\r\n          list: [],\r\n          wrapStyle: \"\"\r\n        });\r\n        return;\r\n      }\r\n\r\n      let {\r\n        listData,\r\n        beforeExtraNodes,\r\n        afterExtraNodes\r\n      } = this;\r\n      let _listData = [];\r\n\r\n      let delItem = (item, extraNode) => ({\r\n        id: item.dragId,\r\n        slot: item.slot,\r\n        fixed: item.fixed,\r\n        extraNode: extraNode,\r\n        tranX: \"0%\",\r\n        tranY: \"0%\",\r\n        data: item\r\n      }); // 遍历数据源增加扩展项, 以用作排序使用\r\n\r\n\r\n      listData.forEach((item, index) => {\r\n        beforeExtraNodes.forEach(_item => {\r\n          if (_item.destKey === index) _listData.push(delItem(_item, true));\r\n        });\r\n\r\n        _listData.push(delItem(item, false));\r\n\r\n        afterExtraNodes.forEach((_item, _index) => {\r\n          if (_item.destKey === index) _listData.push(delItem(_item, true));\r\n        });\r\n      });\r\n\r\n      let list = _listData.map((item, index) => {\r\n        return {\r\n          sortKey: index,\r\n          // 初始化 sortKey 为当前项索引值\r\n          ...item\r\n        };\r\n      });\r\n\r\n      this.updateList(list, false); // 异步加载数据时候, 延迟执行 initDom 方法, 防止基础库 2.7.1 版本及以下无法正确获取 dom 信息\r\n\r\n      setTimeout(() => this.initDom(), 0);\r\n    }\r\n\r\n  }\r\n};\r\n","import mod from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}